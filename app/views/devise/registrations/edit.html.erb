<div class="boardbg">
  <%= render 'shared/navbar' %>
<div class="container">
    
  <div class="row justify-content-center align-items-center">

    <div class="col-lg-6 col-sm-8 my-5">

      <div class="shadow p-3 mb-5 bg-white rounded">

          <h2 class="d-flex justify-content-center">變更<%= resource.username.to_s.humanize %>資料</h2>

          <div class=" d-flex justify-content-center my-5">
              <% if resource.avatar.attached? && resource.avatar.content_type.in?(%w(image/png image/jpg image/jpeg image/jfif)) %>
                <%= image_tag resource.avatar.variant(resize_to_limit: [200, 200]) %>
              <% else %>
                <%= image_tag "user avatar default.png" %>
              <% end %>
            </div>

          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <%= render "devise/shared/error_messages", resource: resource %>

            <div class="form-group">
              <%= f.file_field :avatar, accept: 'image/png, image/jpg, image/jpeg, image/jfif'%>
            </div>

            <div class="form-group">
              <%= f.label :username, "使用者名稱" %>
              <%= f.text_field :username, autofocus: true, autocomplete: "username", class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.label :email, "電子信箱" %>
              <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control' %>
            </div>

            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
            <% end %>

            <div class="form-group">
              <%= f.label :password, "新密碼", class: "display_in"%> 
              <div>
                <i>(密碼長度不能低於<%= @minimum_password_length %>位數)</i>
              </div>
              <%= f.password_field :password, autocomplete: "new-password", class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.label :password_confirmation, "再確認一次密碼" %>
              <div>
                <%= f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :current_password, "請輸入舊密碼", class: "display_in" %> <i>(我們需要舊密碼來進行確認)</i>
              <%= f.password_field :current_password, autocomplete: "current-password", class: 'form-control' %>
            </div>

            <div class="form-group d-flex justify-content-center">
              <%= f.submit "帳號內容變更", class: "btn btn-info" %>
            </div>

          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
</div>